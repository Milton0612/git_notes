# 5、本地库与远程库的交互

## 5.1 推送

* 命令：git push [远程库别名]   [本地分支名]
  * 输入后需要输入账号和密码，需要本地生成密钥，存在远程仓库里面

* 查看该仓库下的远程仓库：git remote -v

* 添加新的远程仓库：git remote add [别名]  [远程地址]

* 删除远程仓库别名：git remote rm [别名]

* 生成密钥：ssh-keygen -t rsa -C "nideyouxiang@xxx.com" 

  1.本地安装好git；

  2.桌面右键 Git Bash Here 打开git命令行；

  3.ssh-keygen -t rsa -C "nideyouxiang@xxx.com"  （全部按enter）；

  4.cd ~/.ssh  （如果没有执行第三步，则不会有这个文件夹）；

  5.cat id_rsa.pub   在命令行打开这个文件，会直接输出密钥；

  6.复制，打开github  ，点自己头像 >> settings >> SSH and GPG keys >>New SSH key 

  \7. titile 随便写。 key里  粘贴第六步的内容；完成。

## 5.2 克隆

* 命令：git clone  [远程地址]

* 效果：
  * 完整的把远程库下载到本地
  * 创建origin 远程地址别名
  * 初始化本地库

## 5.3 多人合作

* 你github选择的是个人用户的话，你的仓库是无法进行团队协同合作的
* 你的个人账号可以加入团队账号，自己创建团队账号需要4$/month

## 5.4 远程库的修改与拉取

#### 1. 拉取：fetch

* 远程库拉取：git fetch [别名]  [远程分支名]
  * 去抓去远程库的文件到本地，并不会改变本地库的文件

* 切换‘远程’的分支：git checkout [别名] [远程库分支名]

  例如：git checkout yuacheng master

* 查看文件，即可发现与远程库的文件一致
* 这样的话，我们可以不需要直接将远程库的文件与本地合并，检查好与本地文件的区别，再进行合并
* 将远程下载的分支与本地maste分支合并：git merge [别名]  [远程分支名]
  * 输入：git merge yuancheng/master 后，就将远程库的文件合并到了本地分支了

* 主要针对对有较为负责的文件修改的时候，怕容易出错，先拉取到本地，在与主分支对比，再合并

#### 2. 拉取：pull

* 命令：git pull [远程库别名]  [本地分支名]
  * 将远程库的文件直接合并到本地库，针对于小型内容修改的时候

#### 3. 解决冲突

* 如果不是基于github远程库的最新版所做的修改，不能推送，必须先拉取

* 拉取下来后如果进入冲突状态，则按照‘分支冲突解决’操作即可。

  例如：a用户提交了‘aaaa’，b用户想提交'bbbb'，则会产生冲突，b用户先使用命令「git pull [远程库别名]  [本地分支名] 」将远程库的文件拉取到本地，进入冲突文件状态，修改冲突的文件，再次提交到本地库（不带文件名），最后推送到远程库，就没有问题了。

#### 4. 跨团队合作

* c用户在gitbub上使用fork A用户的远程库，c用户再拉到自己本地去修改，修改完后提交本地库，推送到c到远程库，在gitbub上使用pull requests。A用户在gitbub上pull requests内确认c用户提交到内容，点击merge pull request， 完成合并。